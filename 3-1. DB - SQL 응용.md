# 1. 절차형 SQL 작성

## (1) 트리거

### 1) 개념
- 데이터베이스 시스템에서 삽입, 갱신, 삭제 등의 이벤트가 발생할 때마다 관련 작업이 자동으로 수행되는 절차형 SQL

### 2) 목적
- 이벤트와 관련된 테이블의 데이터 삽입, 추가, 삭제 작업을 DBMS가 자동적으로 실행시키는 데 활용
- 데이터 무결성 유지 및 로그 메시지 출력 등의 별도 처리를 위해 사용됨

### 3) 트리거 구성
- 선언부(DECLARE) : 트리거의 명칭을 정의
- 이벤트부(EVENT) : 트리거가 실행되는 타이밍, 이벤트를 명시하는 부분
- 시작/종료부(BEGIN/END) : 트리거의 시작과 종료를 표현하는 데 필수적, BEGIN/END가 쌍을 이루어 추가되므로 블록으로 구성, 다수 실행을 제어하는 기본적 단위, 논리적 프로세스 구성
- 제어부(CONTROL) : 기본적으로는 순차적으로 처리, 비교 조건에 따라 블록 또는 문장을 실행, 조건에 따라 반복 실행
- SQL : DML을 주로 사용, 자주 사용되지 않지만 DDL(TRUNCATE 등)을 사용
- 예외부(EXECPTION) : BEGIN~END 절에서 실행되는 SQL 문이 실행될 때 예외 발생 시 예외 처리 방법을 정의하는 처리부

### 4) 트리거 작성 시 유의사항

#### i. TCL 사용 불가
- 트리거 내에는 COMMIT, ROLLBACK 등의 트랜잭션 제어어(TCL) 사용 시 컴파일 에러 발생

#### ii. 오류에 주의
- 트리거 실행 중 오류가 발생하게 되면 트리거 실행의 원인을 제공한 데이터 작업에도 영향
- 특정 테이블에 데이터를 추가한 후 발생하는 트리거에서 오류가 발생할 경우에는 트리거 이후의 작업이 진행되지 않거나 데이터가 추가되지 않음 

### 5) 트리거 작성 사례
CREATE TRIGEER T_STUDENT\
BEFORE INSERT ON STUDENT\
BEGIN\
	IF (AGE<19) THEN\
		RAISE_APPLICATION_ERROR\
			(-20502, ‘미성년자 삽입 불가’);\
	END IF;\
END;

- 설명 : T_STUDENT라는 트리거 명 선언
- 조건 문장이 실행되기 전에 트리거의 내용이 실행되고, 삽입 시에 발생
- STUDENT 테이블에 AGE가 19 미만인 값이 삽입될 경우 20502번 에러 발생

## (2) 이벤트

### 1) 개념
- 특정 시간에 특정한 쿼리, 프로시저, 함수 등을 실행시키는 기능

### 2) 이벤트 구문

#### i. 스케줄
- 이벤트의 실행시간과 간격 지정
- AT 연월일시 : 특정 시간에 이벤트 실행 ex. AT ‘2020-01-01 15:01:25’
- EVERY 간격 : 간격마다 이벤트 실행 ex. EVERY 2 MINUTE

### 3) 사례
CREATE EVENT T_TEST\
	ON SCHEDULE\
		EVERY 50 SECOND\
	DO INSERT INTO TEST\
		SET REGDATE=NOW();

- 설명 : T_TEST의 이벤트 실행
- 50초에 한번씩 실행
- TEST라는 테이블에 현재 시간으로부터 50초마다 INSERT 실행

## (3) 사용자 정의 함수

### 1) 개념
- 절차형 SQL을 활용하여 일련의 연산 처리 결과를 단일 값으로 반환할 수 있는 함수
- DBMS에서 제공되는 공통적 함수 이외에 사용자가 직접 정의하고 작성

### 2) 사용자 정의 함수 특징
- 일반적으로 사용자 정의 함수는 호출을 통해 실행
- 반환되는 단일 값을 조회 또는 삽입, 수정 작업에 이용
- 프로시저와의 가장 큰 차이점은 기본적인 개념 및 사용법, 문법 등은 프로시저와 동일하며, 종료 시 단일 값을 반환한다는 점.

### 3) 사용자 정의 함수 구성
- 선언부(DECLARE) : 프로시저의 명칭, 변수와 인수 그리고 그에 대한 데이터 타입 정의하는 부분
- 시작/종료부(BEGIN END) : 프로시저 시작과 종료 표현, BEGIN과 END가 쌍을 이루어 추가되므로 블록으로 구성, 다수 실행을 제어하는 기본적 단위가 되며 논리적 프로세스 구성
- 제어부(CONTROL) : 기본적으로는 순차적 처리, 비교 조건에 따라 블록 또는 문장 실행, 조건에 따라 반복 실행
- SQL : 조회 용도로 SELECT 문 사용, 데이터 조작하는 INSERT, DELETE, UPDATE는 사용 불가
- 예외부(EXCEPTION) : BEGIN~END 절에서 실행되는 SQL 문이 실행될 때 예외 발생 시 예외 처리 방법을 정의하는 처리부
- 반환부(RETURN) : 호출문에 대한 함수값 반환

### 4) 사용자 정의 함수 사례
CREATE FUNCTION GET_AGE (V_BIRTH_YEAR IN CHAR(4))\
IS V_THIS_YEAR CHAR(4);\
BEGIN\
	SELECT TO_CHAR(SYSDATE, ‘YYYY’)\
		INTO V_THIS_YEAR\
		FROM DUAL;\
		RETURN V_THIS_YEAR - V_BIRTH_YEAR  + 1;\
END;

- 설명 : GET_AGE 이름의 함수
- V_THIS_YEAR이라는 CHAR(4) 변수 생성
- SYSDATE(현재시간)을 ‘YYYY’로 받아서 V_THIS_YEAR라는 변수에 삽입
- 현재 연도와 생년을 숫자 형식을 변환한 후 두 수의 차에 1을 더한 값(나이) 반환

### 5) 사용자 정의 함수 호출쿼리 작성 문법
- 프로시저와 동일하게 외부에서의 호출을 통해 실행
- 비교적 단순한 결괏값을 구하는 것이 보통, 타 시스템에 정보 제공 등 은닉을 통해 캡슐화를 제공하는 데에도 많이 사용

#### * 예시
SELECT 함수명(파라미터 1, …)\
	FROM 테이블명;\
- 직접 사용자 정의 함수 결괏값을 데이터 질의어에 활용

UPDATE 테이블명\
	SET 컬럼명 = 함수명(파라미터1, …)\
WHERE 조건\
	- 사용자 정의 함수 결괏값을 데이터 조작어에 직접 적용, 활용

### 6) 호출쿼리 작성 사례
SELECT GET_AGE(‘19900101’)\
	FROM DUAL;

	- 생년월일 값을 가지고 연령값을 가져오는 사례\

UPDATE EMPLOYEE_INFO_T\
	SET AGE = GET_AGE(BIRTH_DATE)\
WHERE EMPLOYEE_ID = ‘2017001’;

	- 직원 아이디를 활용하여 생일 컬럼 내의 값에 직접 적용, 연령값 수정

## (4) SQL 문법

###  1) 개념
- 데이터베이스를 접근하고 조작하는 데 필요한 표준 언어를 활용할 수 있게 해주는 규칙

### 2) SQL 문법의 분류

#### i. 데이터 정의어(DDL)
- 데이터를 정의하는 언어
- 테이블이나 관계의 구조를 생성하는 데 사용
- CREATE, ALTER, DROP, TRUNCATE 문 등

#### ii. 데이터 조작어(DML)
- 데이터베이스에 저장된 자료들을 입력, 수정, 삭제, 조회하는 언어
- SELECT, INSERT, UPDATE, DELETE 문이 있음
- SELECT 문은 특별히 질의어라고 함

#### iii. 데이터 제어어(DCL)
- 데이터베이스 관리자가 데이터 보안, 무결성 유지, 병행 제어, 회복을 위해 DBA가 사용하는 제어용 언어
- GRANT, REVOKE 문이 있음

### 3) WHERE 조건

#### i. 비교 : =, <>, <, <=, >, >=
#### ii. 범위 : BETWEEN
- PRICE BETWEENT 50000 AND 80000
#### iii. 집합 : IN, NOT IN
- PRICE IN (4000, 5000, 6000) : 가격이 4000 또는 5000 또는 6000
#### iv. 패턴 : LIKE
- NAME LIKE ‘정보%’ : 이름이 ‘정보’로 시작되는 문자열
#### v. NULL : IS NULL, IS NOT NULL
- PRICE IS NULL
#### vi. 복합조건 : AND, OR, NOT

### 4) LIKE와 같이 사용하는 와일드 문자
- + : 문자열 연결
- % : 0개 이상의 문자열과 일치
- [] : 1개의 문자와 일치, ‘[0-8]%’ : 0-8 사이 숫자로 시작하는 문자열
- [^] : 1개 문자와 불일치, ‘[^0-8]%’ : 0-8 사이 숫자로 시작하지 않는 문자열
- _ :특정 위치의 1개 문자와 일치, ‘_동%’ : 두 번째 위치에 ‘동’이 들어가는 문자열

### 5) 주석처리
- — : ‘—‘이 시작하는 위치부터 해당 라인 끝까지 실행되지 않도록 함(한줄 주석)
- /* 문장 */ : 여러줄 주석

### 6) 힌트 사용
- 실행하려 하는 SQL 문에 사전에 정보를 주어서 SQL 문 실행에 빠른 결과를 가져오는 효과를 만드는 문법
- 주석에 ‘+’ 기호를 붙이면 힌트로 인식
- ex. —+ 힌트명(파라미터, …), /*+ 힌트명(파라미터, …)*/

# 2. 응용 SQL 작성

## (1) 데이터 조작어(DML)

### 1) 개념
- data manipulation language
- 데이터베이스에 저장된 자료들을 입력, 수정, 삭제, 조회하는 언어

### 2) 유형
- SELECT : 데이터 조회 : 해당 테이블을 구성하는 튜플 중에서 전체 또는 조건을 만족하는 튜플을 검색하여 주기억장치 상에 임시 테이블로 구성하는 명령문
- INSERT : 데이터 생성 : 해당 테이블에 새로운 튜플 삽입할 때 사용하는 명령문
- UPDATE : 데이터 변경 : 해당 테이블에 있는 튜플 중에서 특정 튜플의 내용을 변경할 때 사용하는 명령문
- DELETE : 데이터 삭제 : 해당 테이블에 있는 튜플 중에서 특정 튜플을 삭제할 때 사용하는 명령문

### 3) 명령어

#### i. SELECT(데이터 조회 명령어)
SELECT [ALL |] 속성명, 속성명2, ...\
  FROM 테이블명1, ...\
[WHERE 조건]\
[GROUP BY 속성명1, ...]\
[HAVING 그룹조건]\
[ORDER BY 속성 [ASC | DESC] ];

##### 1] SELECT 절
- 검색하고자 하는 속성명, 계산식
- 2개 이상의 테이블을 대상으로 검색할 때는 '테이블명.속성명'으로 표현
- 술어 부분은 ALL이 기본값
- ALL : 모든 튜플 검색, SELECT 뒤에 명시하지 않을 경우 ALL로 인식
- DISTINCT : 중복된 속성이 조회될 경우 그 중 한 개만 검색

##### 2] FROM 절
- 질의에 의해 검색될 데이터들을 포함하는 테이블명을 기술

##### 3] WHERE 절
- 검색할 조건 기술

##### 4] GROUP BY절
- 속성값을 그룹으로 분류하고자 할 때 사용

##### 5] HAVING절
- GROUP BY에 의해 분류한 후 그룹에 대한 조건 기술

##### 6] ORDER BY절
- 속성값을 정렬하고자 할 때 사용
- ASC와 DESC 키워드 생략 시 오름차순 정렬

##### +a] [학생] 테이블에서 학년이 6학년이고, 수강과목이 음악인 학생의 성명과 연락처 검색
SELECT 성명, 연락처/
  FROM 학생/
 WHERE 학년 = 6 AND 수강과목 = '음악';

#### ii. INSERT(데이터 삽입) 명령어
INSERT INTO 테이블명(속성명1, ...)\
VALUES(데이터1,...)

- 속성과 데이터 개수, 데이터 타입이 일치해야 함.
- 속성명 생략가능
- 예시 
INSERT INTO 학생(학번, 성명, 학년, 수강과목) VALUES(6677, '장길산', 3, '수학')

#### iii. UPDATE(데이터 변경) 명령어
UPDATE 테이블명\
  SET 속성명 = 데이터, ...\
 WHERE 조건;

- UPDATE 명령문은 WHERE 절을 통해 어떤 조건이 만족할 경우에만 특정 컬럼의 값을 수정하는 용도로 자주 사용됨
- 예시 : UPDATE 학생\ SET 주소='인천'\WHERE 이름='장길산';

#### iv. DELETE(삭제) 명령어
DELETE FROM 테이블명\
WHERE 조건;

- 모든 레코드를 삭제할 때는 WHERE절 없이 DELETE만 사용
- 레코드 삭제해도 테이블 구조는 남아 있어서 디스크에서 테이블을 완전히 삭저헤난 DROP 명령과는 다름
- 예시 : DELETE FROM 학생\ WHERE 이름 = '장길산'

## (2) 데이터 제어어(DCL)

### 1) 개념
- Data Control Language
- DB 관리자가 데이터 보안, 무결성 유지, 병행 제어, 회복을 위해 사용하는 언어

### 2) 기능
- 데이터 보안 : 불법적인 사용자로부터 데이터 보호
- 무결성 유지 : 데이터의 정확성과 일관성 유지하는 기능
- 병행수행 제어 : 여러 트랜잭션을 수행할 때 트랜잭션들이 데이터베이스의 일관성을 파괴하지 않도록 트랜잭션 간의 상호작용 제어
- 회복 : 데이터베이스 장애가 발생할 경우, 데이터베이스를 장애 발생 이전의 상태로 복원하는 기능

### 3) 유형

#### i. DCL

##### 1] GRANT : 사용 권한 부여
- 관리자(DBA)가 사용자에게 데이터베이스에 대한 권한 부여하는 명령어

##### 2] REVOKE : 사용 권한 취소
- 관리자(DBA)가 사용자에게 부여했던 권한을 회수하기 위한 명령어

#### ii. DCL/TCL

##### 1] COMMIT : 트랜잭션 확정
- 데이터베이스 트랜잭션 내용 업데이트를 영구적으로 확정하는 명령어

##### 2] ROLLBACK : 트랜잭션 취소
- 데이터베이스에서 업데이터 오류가 발생할 때, 이전 상태로 되도롤리는 명령어

##### 3] SAVEPOINT(=CHECKPOINT) : 저장 시기 설정
- 트랜잭션의 특정 지점에 이름 지정하고, 그 지점 이전에 수행한 작업에 영향을 주지 않고 그 지점 이후에 수행한 작업을 롤백할 수 있는 명령어

### 4) 명령어

#### i. GRANT
- 시스템 권한 : GRANT 권한 TO 사용자; : 관리자가 사용자에게 데이터베이스에 대한 권하는 부여하는 명령어
- 객체 권한 : GRANT 권한 ON 테이블 TO 사용자; : 관리자가 사용자에게 테이블을 수정, 삽입, 삭제, 조회와 프로시저를 실행할 수 있는 권한 부여
- 구문 마지막에 WITH GRANT OPTION 키워드를 붙이면 권한이 필요할 경우 다른 사용자에게 부여할 수 있는 권한을 부여할 수 있다.

##### +a) 예시
- 관리자가 사용자인 장길산에게 학생 테이블에 대해 수정할 수 있는 권한 부여 : GRANT UPDATE ON 학생 TO 장길산;
- 관리자가 사용자 장길산에게 학생 테이블에 대해 조회할 수 있는 권한과 그 권한을 다른 사용자에게 부여할 수 있는 권한 부여 : GRANT SELECT ON 학생 TO 장길산 WITH GRANT OPTION;

#### ii. REVOKE 명령어
- 시스템 권한 : REVOKE 권한 FROM 사용자; : 관리자가 사용자에게 테이블/뷰/프로시저 등을 생성하고 삭제할 수 있는 권한 회수
- 객체 권한 : REVOKE 권한 ON 테이블 FROM 사용자; : 관리자가 사용자에게 테이블을 수정, 삽입, 삭제, 조회와 프로시저 실행할 수 있는 권한 회수
- REVOKE 구문에 CASCADE CONSTRAINTS 키워드 붙이면 WITH GRANT OPTION으로 부여된 사용자들의 권한까지 회수할 수 있다.

##### +a) 예시
- 관리자가 사용자인 장길산에게 학생 테이블에 대해 수정할 수 있는 권한 회수 : REVOKE UPDATE ON 학생 FROM 장길산;
- 관리자가 사용자 장길산에게 학생 테이블에 대해 조회할 수 있는 권한과 WITH GRANT OPTION으로 부여된 사용자들의 권한까지 회수 : REVOKE SELECT ON 학생 FROM 장길산 CASCADE CONSTRAINT;

#### iii. TCL 명령어
- 트랜잭션 확정 : COMMIT; : 데이터베이스 트랜잭션 내용 업데이트를 영구적으로 확장
- 트랜잭션 취소 : ROLLBACK; : 데이터베이스 업데이트 오류 발생 시 이전 상태로 되돌림
- 세이브 포인트 지정 : SAVEPOINT 이름; : 특정 지점을 지정
- 세이브 포인트 롤백 : ROLLBACK TO SAVEPOINT 이름; : SAVEPOINT로 지정한 부분 이후에 발생한 트랜잭션 취소

## (3) 윈도 함수

### 1) 윈도 함수 개념
- 행과 행 간의 관계를 쉽게 정의하기 위해 만든 함수
- 데이터베이스를 사용한 온라인 분석 처리 용도로 사용하기 위해 SQL에 추가된 기능으로 OLAP 함수라고도 함

### 2) 윈도 함수 구문
SELECT 함수명(파라미터)\
  OVER\
  ([PARTITION BY 컬럼1, ...]\
  [ORDER BY 컬럼A, ...])\
  FROM 테이블명;
  
- PARTITION BY : 선택 항목, 순위를 정할 대상 범위의 컬럼을 설정, GROUP BY가 가진 집약 기능 없음, 이로 인해 레코드 수가 줄어들지 않음
- PARTITION BY를 통해 구분된 레코드 집합을 윈도라고 함
- 윈도함수에는 OVER 문구가 필수적으로 포함
- ORDER BT 뒤에는 SORT 컬럼을 입력(어떤 열을 어떤 순서로 순위를 결정할지 지정)

### 3) 윈도 함수의 분류
- 집계 함수 : 여러 행 또는 테이블 전체 행으로부터 하나의 결괏값을 반환하는 함수
- 순위 함수 : 레코드 순위 계산하는 함수
- 행 순서 함수 : 레코드에서 가장 먼저 나오거나 가장 뒤에 나오는 값, 이전이후 값들을 출력하는 함수
- 그룹 내 비율 함수 : 백분율 보여주거나 행의 순서별 백분율 등 비율과 관련된 통게 보여주는 함수

#### i. 집계함수
- COUNT : 복수 행 줄 수 구하는 함수
- SUM : 복수 행의 해당 컬럼에 대한 합계 구하는 함수
- AVG : 복수 행의 해당 컬럼 간의 평균에 대한 평균 구하는 함수
- MAX : 복수 행의 해당 컬럼 중 최댓값 구하는 함수
- MIN : 복수 행의 해당 컬럼 중 최솟값 구하는 함수
- STDDEV : 복수 행의 해당 컬럼에 대한 표준편차 구하는 함수
- VARIAN : 복수 행의 해당 컬럼에 대한 분산 구하는 함수

#### ii. 순위함수
- RANK : 특정 항목에 대한 순위 구하는 함수, 동일 순위의 레코드 존재 시 후순위는 넘어감
- DENSE_RANK : 레코드의 순위를 계산하는 함수, 동일 순위의 레코드 존재 시 후순위는 넘어감
- ROW_NUMBER : 레코드 순위 계산하는 함수, 동일 순위의 값이 존재해도 이와 무관하게 연속 번호 부여

#### iii. 행 순서 함수
- FIRST_VALUE : 파티션별 윈도에서 가장 먼저 나오는 값을 반환하는 함수, 집계 함수의 MIN과 동일한 결과 출력
- LAST_VALUE : 파티션별 윈도에서 가장 늦게 나오는 값을 반환하는 함수, 집계 함수의 MAX와 동일한 결과 출력
- LAG : 파티션별 윈도에서 이전 로우의 값을 반환하는 함수
- LEAD : 파티션별 윈도에서 이후 로우의 값을 반환하는 함수

#### iv. 그룹 내 비율 함수
- RATIO_TO_REPORT : 주어진 그룹에 대해 합을 기준으로 각 로우의 상대적 비율 반환하는 함수, 결괏값은 0~1 범위 값을 가짐
- PERCENT_RANK : 주어진 그룹에 대해 제일 먼저 나오는 것을 0으로, 제일 늦게 나오는 것을 1로 하여, 값이 아닌 행의 순서별 백분율 구하는 함수, 결괏값은 0~1의 범위 값 가짐

### 4) 윈도 함수 활용

#### i. OLAP(On-Line Analytical Processing) 개념
- 사용자가 동일한 데이터를 여러 기준을 이용하는 다양한 방식으로 바라보면서 다차원 데이터 분석을 할 수 있도록 도와주는 의사결정 지원 시스템

#### ii. 연산
- Roll-Up : 분석할 항목에 대해 구체적인 데이터로부터 요약된 형태의 데이터로 접근하는 연산
- Drill-Down : 분석할 항목에 대해 요약된 형태의 데이터로부터 구체적인 데이터로 접근하는 연산
- Slicing : 온라인 분석처리를 위한 자료 구조인 데이터 큐브의 한 조각을 볼 수 있게 해주는 연산
- Dicing : 고정된 다차원 값에 대한 연산
- Pivoting : 다차원 분석 테이블인 크로스 테이블에서 차원 변경을 위해 사용되는 연산

## (4) 그룹 함수

### 1) 개념
- 그룹함수는 테이블 전체 행을 하나 이상의 컬럼을 기준으로 컬럼 값에 따라 그룹화하여 그룹별로 결과를 출력하는 함수
- 소계 및 총계 등을 구하기 위해서 그룹 함수를 사용한다면 단일 DML만으로도 원하는 작업 가능

### 2) 그룹함수 유형

#### i. ROLLUP(소그룹 간 소계 출력)
- 지정된 컬럼의 소계 및 총계를 구하기 위해 사용되는 그룹 함수
- 지정 컬럼 수보다 하나 더 큰 레벨만큼의 중간 집계 값이 생성된다.
- ROLLUP의 지정 컬럼은 계층별로 구성되기 때문에 순서가 바뀌면 수행 결과가 바뀌므로 유의해서 사용해야 한다.
- 소계 집계 대상이 되는 컬럼을 ROLLUP 키워드 뒤에 기재
- 소계 집계 대상이 아닌 경우 GROUP BY 키워드 뒤에 기재
- SELECT 뒤에 포함되는 컬럼이 GROUP BY 또는 ROLLUP 키워드 뒤에 기재되어야 함
- ORDER BY 구문을 활용해 계층 내 정렬에 사용 가능

#### ii. CUBE(GROUP BY 항목들과 다차원 소계 출력)
- CUBE는 결합 가능한 모든 값에 대해 다차원 집계를 생성하는 그룹 함수
- CUBE는 내부적으로 대상 컬럼의 순서를 변경하여 또 한 번의 쿼리를 수행한다.
- 연산이 많아 시스템에 부담 줌
- 소계 집계 대상이 되는 컬럼을 CUBE 키워드 뒤에 기재
- 소계 집계 대상이 아닌 경우 GROUP BY 키워드 뒤에 기재
- SELECT 뒤에 포함되는 컬럼이 GROUP BY 또는 CUBE 키워드 뒤에 기재되어야 함
- ORDER BY 구문을 활용해 계층 내 정렬에 사용 가능

#### iii. GROUPING SETS(특정 항목에 대한 소계 출력)
- 집계 대상 컬럼들에 대한 소계를 구할 수 있는 그룹 함수
- ROLLUP과 달리 컬럼 간 순서와 무관한 결과 얻을 수 있다.
- GROUPING SETS를 이용해 다양한 소계 집합을 만들 수 있다.
- ORDER BY를 사용하여 집계 대상 그룹과의 표시 순서를 조정하여 체계적으로 보여줄 수 있다.

## (5) 오류 처리

### 1) 개념
- 프로그램 코드 상 오류나 프로시저 실행 시 예외나 에러가 발생했을 때, 문제를 해결하고 의미 있는 에러 메시지를 부여하는 과정

### 2) 핸들러 선언 구문
- DECLARE HANDLER 문 사용

DECLARE 1️⃣ HANDLER\
  FOR 2️⃣ 3️⃣;

- 1️⃣ 액션 : 해당 오류 발생 시 핸들러 처리 방법
- CONTINUE : 3️⃣ 명령어 부분을 계속 실행
- EXIT : 3️⃣ 명령어 부분을 한 번 실행\
- 2️⃣ 상태 값 : 핸들러가 수행되기 위한 에러코드, SQLWARNING(에러가 아닌 경고 발생), NOTFOUND(다음 레코드를 가져오지 못했을 때), SQLEXCEPTION(에러 발생)\
- 3️⃣ 명령문 : 핸들러가 호출될 때 실행되는 명령
